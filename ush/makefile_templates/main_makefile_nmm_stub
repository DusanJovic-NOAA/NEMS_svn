####   requires necessary grid components
#
#
include ../../ush/compile_settings
# *****************************************************************
#
all: 
	cd $(GFS_DYN) && $(STUB_MAKEFILE) 
	cp $(GFS_DYN)/gfs_dynamics_grid_comp_mod.mod $(MODDIR)/modstub/gfs
	cd $(GFS_PHY) && $(STUB_MAKEFILE) 
	cp $(GFS_PHY)/layout1.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/date_def.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/namelist_physics_def.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/mersenne_twister.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/physcons.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/funcphys.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/module_radiation_astronomy.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/tracer_const.mod $(MODDIR)/modstub/gfs 
	cp $(GFS_PHY)/ozne_def.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/resol_def.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/module_radiation_driver.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/gfs_physics_grid_comp_mod.mod $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/ozinterp_stub.o $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/compns_physics_stub.o $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/set_soilveg_stub.o $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/gfuncphys_stub.o $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/sfccycle_stub.o $(MODDIR)/modstub/gfs
	cp $(GFS_PHY)/gbphys_v_stub.o $(MODDIR)/modstub/gfs
	cd $(GFS_IO) && $(STUB_MAKEFILE) 
	cp $(GFS_IO)/module_write_grid_comp_gfs.mod $(MODDIR)/modstub/gfs
	cp $(GFS_IO)/module_write_routines_gfs.mod $(MODDIR)/modstub/gfs
	cd $(GFS_UTIL) && $(STUB_MAKEFILE) 
	cp $(GFS_UTIL)/atmos_dyn_phy_cpl_comp_mod.mod $(MODDIR)/modstub/gfs
	cp $(GFS_UTIL)/module_gfs_mpi_def.mod $(MODDIR)/modstub/gfs
	cd $(ATM) && $(STUB_MAKEFILE) 
	cp $(ATM)/module_gfs_core_setup.mod ../../mod/modstub/gfs
	cp $(ATM)/module_gfs_integrate.mod ../../mod/modstub/gfs
	echo "gfs stub libraries created."
	rm -f $(GFS_DYN)/*.mod
	rm -f $(GFS_DYN)/*.o
	rm -f $(GFS_IO)/*.mod
	rm -f $(GFS_IO)/*.o
	rm -f $(GFS_PHY)/*.mod
	rm -f $(GFS_PHY)/*.o
	rm -f $(GFS_UTIL)/*.mod
	rm -f $(GFS_UTIL)/*.o
	rm -f $(ATM)/*.mod
	rm -f $(ATM)/*.o
	rm -f $(ATM)/*.f90
clean:
	cd $(GFS_DYN) && $(STUB_MAKEFILE) clean
	cd $(GFS_PHY) && $(STUB_MAKEFILE) clean
	cd $(GFS_IO) && $(STUB_MAKEFILE) clean
	cd $(GFS_UTIL) && $(STUB_MAKEFILE) clean
	cd $(ATM) && $(STUB_MAKEFILE) clean
	echo "gfs stub libraries erased"
