#!/bin/ksh

# copy_diff_files
copy_diff_files(){
  if [[ ! -f $2 ]] ; then
    set -x
    cp $1 $2
    set +x
  else
  if [[ `diff $1 $2`"" != "" ]] ; then
    set -x
    cp $1 $2
    set +x
  else
    echo "confirmed $2"
  fi
  fi
}

#
# Standard
#

if [[ $1 = nmmb_intel_theia ]]; then
     set -x
     copy_diff_files conf/configure.nems.Theia.intel_nmmb conf/configure.nems
     touch conf/externals.nems
     copy_diff_files conf/modules.nems.Theia_ESMF_700_nmmb conf/modules.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h ESMFVersionDefine.h
     set +x
     echo "NEMS/NMMB build on Theia using Intel and ESMF v7.0.0"
elif [[ $1 = nmmb_intel_wcoss ]]; then
     set -x
     copy_diff_files conf/configure.nems.Wcoss.intel_nmmb conf/configure.nems
     touch conf/externals.nems
     copy_diff_files conf/modules.nems.Wcoss_ESMF_700_nmmb conf/modules.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h              ESMFVersionDefine.h
     set +x
     echo "NEMS/NMMB build on Wcoss using Intel and ESMF v7.0.0"
elif [[ $1 = gsm_intel_theia ]]; then
     set -x
     copy_diff_files conf/configure.nems.Theia.intel_gsm conf/configure.nems
     touch conf/externals.nems
     copy_diff_files conf/modules.nems.Theia_ESMF_700_gsm conf/modules.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h ESMFVersionDefine.h
     set +x
     echo "NEMS/GSM build on Theia using Intel and ESMF v7.0.0"
elif [[ $1 = gsm_intel_wcoss ]]; then
     set -x
     copy_diff_files conf/configure.nems.Wcoss.intel_gsm conf/configure.nems
     touch conf/externals.nems
     copy_diff_files conf/modules.nems.Wcoss_ESMF_700_gsm      conf/modules.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h              ESMFVersionDefine.h
     set +x
     echo "NEMS/GSM build on Wcoss using Intel and ESMF v7.0.0"

elif [[ $1 = gsm_intel_wcoss_c ]]; then
     set -x
     copy_diff_files conf/configure.nems.Wcoss_C.intel_gsm conf/configure.nems
     touch conf/externals.nems
     copy_diff_files conf/modules.nems.Wcoss_C_ESMF_700_gsm      conf/modules.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h              ESMFVersionDefine.h
     set +x
     echo "NEMS/GSM build on Wcoss using Intel and ESMF v7.0.0"
#
# Coupled
#
elif [[ $1 = coupled_intel_wcoss ]]; then
     copy_diff_files conf/configure.nems.Wcoss.intel conf/configure.nems
     copy_diff_files conf/externals.nems.Wcoss conf/externals.nems
     copy_diff_files conf/modules.nems.Wcoss_ESMF_NUOPC conf/modules.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h ESMFVersionDefine.h
     echo "Coupled NEMS build on Wcoss using Intel and ESMF v7.0.0"
elif [[ $1 = coupled_intel_gaea ]]; then
     copy_diff_files conf/configure.nems.Gaea.intel conf/configure.nems
     copy_diff_files conf/externals.nems.Gaea conf/externals.nems
     copy_diff_files conf/modules.nems.Gaea_ESMF_NUOPC conf/modules.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h ESMFVersionDefine.h
     echo "Coupled NEMS build on Gaea using Intel and ESMF v7.0.0"
elif [[ $1 = coupled_intel_theia ]]; then
     copy_diff_files conf/configure.nems.Theia.intel conf/configure.nems
     copy_diff_files conf/externals.nems.Theia conf/externals.nems
     copy_diff_files conf/modules.nems.Theia_ESMF_NUOPC conf/modules.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h ESMFVersionDefine.h
     echo "Coupled NEMS build on Theia using Intel and ESMF v7.0.0"
elif [[ $1 = coupled_intel_yellowstone ]]; then
     copy_diff_files conf/configure.nems.Yellowstone.intel conf/configure.nems
     copy_diff_files conf/externals.nems.Yellowstone conf/externals.nems
     copy_diff_files conf/modules.nems.Yellowstone_ESMF_NUOPC conf/modules.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h ESMFVersionDefine.h
     echo "Coupled NEMS build on Yellowstone using Intel and ESMF v7.0.0"
elif [[ $1 = coupled_linux_gnu ]]; then
     copy_diff_files conf/configure.nems.Linux.gnu conf/configure.nems
     copy_diff_files conf/externals.nems.Linux.gnu conf/externals.nems
     copy_diff_files ESMFVersionDefine_ESMF_NUOPC.h ESMFVersionDefine.h
     echo "Coupled NEMS build on Linux using GNU and ESMF v7.0.0"

#
# help message
#
else
     echo;echo "     Run ./configure with one argument:"
     echo;
     echo " 'configure nmmb_intel_wcoss'  : NEMS/NMMB build on Wcoss using Intel and ESMF v7.0.0"
     echo " 'configure nmmb_intel_theia'  : NEMS/NMMB build on Theia using Intel and ESMF v7.0.0"
     echo " 'configure gsm_intel_wcoss'   : NEMS/GSM build on Wcoss using Intel and ESMF v7.0.0"
     echo " 'configure gsm_intel_theia'   : NEMS/GSM build on Theia using Intel and ESMF v7.0.0"
     echo " 'configure gsm_intel_wcoss_c' : NEMS/GSM build on Crays using Intel and ESMF v7.0.0"
     echo;
     echo " 'configure coupled_intel_wcoss'       : Coupled NEMS build on Wcoss using Intel and ESMF v7.0.0"
     echo " 'configure coupled_intel_gaea'        : Coupled NEMS build on Gaea using Intel and ESMF v7.0.0"
     echo " 'configure coupled_intel_theia'       : Coupled NEMS build on Theia using Intel and ESMF v7.0.0"
     echo " 'configure coupled_intel_yellowstone' : Coupled NEMS build on Yellowstone using Intel and ESMF v7.0.0"
     echo " 'configure coupled_linux_gnu'         : Coupled NEMS build on Linux using GNU and ESMF v7.0.0"
     echo;
fi

