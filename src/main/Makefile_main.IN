####   requires necessary grid components
#
#
# *****************************************************************
#
include ../../build/compile_settings
all: 
	_MODULES_
	/bin/rm -f $(EXEDIR)/NEMS.x
	$(CPP) $(CPPFLAGS) $(ROOT).F90 > $(ROOT).f90
	$(F90) _FLAGS_ -c $(ROOT).f90
	$(LDR) $(LDFLAGS) -o ${EXEDIR}/NEMS.x $(OBJS) $(LIB)
	echo "NEMS.x is created for NMM core."

clean:
	_CLEANMODULES_
	/bin/rm -f $(EXEDIR)/NEMS.x
	/bin/rm -f *.o
	/bin/rm -f *.mod
	/bin/rm -f *.f90
	/bin/rm -f *.lst
	/bin/rm -f lm
	/bin/rm -f map
	rm -f $(MODDIR)/modstub/gfs/*
	rm -f $(MODDIR)/modstub/nmm/*
	rm -f $(LIBDIR)/libstub/*
	echo "directories cleaned."
