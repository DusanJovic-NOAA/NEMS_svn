##  This is an elementary grid component or say independent grid component ##
 F77     = mpxlf
 F90     = mpxlf90
 EXEC    = ../../lib/libstub/GEFS_Cpl.a
#
 FINCS    = -I/meso/save/wx20rv/ESMF_libs/esmf_3_1_0rp2/mod/modO/AIX.default.64.mpi.default

DEBUG    = -qcheck -qsource -qlist
#FFLAGM_DEBUG  = -g -fullpath -O0 -qinitauto=FF911299 -qflttrap=enable:overflow:zerodivide:invalid -qsigtrap=xl__trcedump -NS2048 $(DEBUG)

#---------------
# For non-debug.
#---------------
FFLAGM_DEBUG  = -O3

 OPTS     = -qsuffix=cpp=f -qrealsize=8 -qstrict -qxlf77=leadzero -qmaxmem=-1 -qnolm -qsmp=noauto -qnosave $(FFLAGM_DEBUG)
 OPTS90   = -qsuffix=cpp=f -qrealsize=8 -qstrict -qxlf77=leadzero -qmaxmem=-1 -qnolm -qsmp=noauto -qnosave $(FFLAGM_DEBUG)
 OPTS90A  = -qsuffix=cpp=f -qrealsize=8 -qstrict -qxlf77=leadzero -qmaxmem=-1 -qnolm -qsmp=noauto -qnosave$(FFLAGM_DEBUG)
#TRAPS    = -qinitauto=FF911299 -qflttrap=ov:zero:inv:en -qsigtrap
#
 FFLAG90  = $(OPTS90) $(FINCS) -qfree -NS2048
 FFLAG90A = $(OPTS90A) $(FINCS) -qfree -NS2048
 FFLAGS   = $(OPTS) $(TRAPS)
 FFLAGX   = $(OPTS) $(TRAPS)
 FFLAGIO  = $(OPTS) $(TRAPS)
 FFLAGY   = $(OPTS)
 FFLAGM   = $(OPTS) $(FINCS) $(TRAPS) $(FFLAGM_DEBUG) -NS2048
 FFLAGSF  = -qrealsize=8 -qnosave -q free=f90 -qcheck $(FFLAGM_DEBUG)
 FFLAGSI  = -qrealsize=8 -qnosave -q free=f90 $(FFLAGM_DEBUG)
 FFLAGB   = -qrealsize=8 -qnosave -qfixed $(FFLAGM_DEBUG)

 AR = ar
 ARFLAGS = -r

.SUFFIXES: .o .f .F .h
#
# *****************************************************************
#


OBJS =  Lib_ESMFStateAddGetMod_STUB.o            \
	machine_STUB.o                           \
	GEFS_Cpl_InternalState_ESMFMod_STUB.o    \
	GEFS_bcst_global_STUB.o                  \
	GEFS_Sto_Per_Scheme_Step2_STUB.o         \
	DistributeForStep1_STUB.o                \
	GEFS_CplState_ESMFMod_STUB.o             \
	GEFS_Cpl_Run_ESMFMod_STUB.o              \
	GEFS_Cpl_ESMFMod_STUB.o                  \
	GEFS_GetParameterFromStateMod_STUB.o     \
	GEFS_CplComp_ESMFMod_STUB.o              \
	GEFS_Sto_Per_Scheme_Step1_STUB.o         \
	kinds_STUB.o                             \
	peuc_STUB.o                              \
	pran_STUB.o                              \
	prana_STUB.o 
#	Cal_Sto_Coef_STUB.o

#
#
# *****************************************************************
#
GEFS_Cpl: $(EXEC)

$(EXEC):  $(OBJS)
	$(AR) $(ARFLAGS) $(EXEC) $(OBJS)
	echo " $(EXEC) created!"

clean:
	rm -f $(OBJS) *.mod *.a

.F.o:
	$(F77) $(FFLAGS) -c -d $< 
	#$(F77) $(FFLAGS) -c -d -WF,-DCLR:${RASV} $< 
.f.o:
	$(F77) $(FFLAGS) -c $< 

Lib_ESMFStateAddGetMod_STUB.o: Lib_ESMFStateAddGetMod_STUB.f
	$(F77) $(FFLAG90) -c Lib_ESMFStateAddGetMod_STUB.f

machine_STUB.o: machine_STUB.f
	$(F77) $(FFLAGB) -c machine_STUB.f

GEFS_Cpl_InternalState_ESMFMod_STUB.o: GEFS_Cpl_InternalState_ESMFMod_STUB.f
	$(F77) $(FFLAG90) -c GEFS_Cpl_InternalState_ESMFMod_STUB.f

DistributeForStep1_STUB.o: DistributeForStep1_STUB.f
	$(F77) $(FFLAG90) -c DistributeForStep1_STUB.f

GEFS_CplState_ESMFMod_STUB.o: GEFS_CplState_ESMFMod_STUB.f
	$(F77) $(FFLAG90) -c GEFS_CplState_ESMFMod_STUB.f

GEFS_Sto_Per_Scheme_Step1_STUB.o: GEFS_Sto_Per_Scheme_Step1_STUB.f
	$(F77) $(FFLAG90) -c GEFS_Sto_Per_Scheme_Step1_STUB.f

GEFS_Sto_Per_Scheme_Step2_STUB.o: GEFS_Sto_Per_Scheme_Step2_STUB.f
	$(F77) $(FFLAG90) -c GEFS_Sto_Per_Scheme_Step2_STUB.f

GEFS_bcst_global_STUB.o: GEFS_bcst_global_STUB.f
	$(F77) $(FFLAG90) -c GEFS_bcst_global_STUB.f

GEFS_Cpl_Run_ESMFMod_STUB.o:	GEFS_Cpl_Run_ESMFMod_STUB.f
	$(F77) $(FFLAG90) -c GEFS_Cpl_Run_ESMFMod_STUB.f

GEFS_Cpl_ESMFMod_STUB.o: GEFS_Cpl_ESMFMod_STUB.f
	$(F77) $(FFLAG90) -c GEFS_Cpl_ESMFMod_STUB.f

GEFS_GetParameterFromStateMod_STUB.o: GEFS_GetParameterFromStateMod_STUB.f
	$(F77) $(FFLAG90) -c GEFS_GetParameterFromStateMod_STUB.f

GEFS_CplComp_ESMFMod_STUB.o:	GEFS_CplComp_ESMFMod_STUB.f
	$(F77) $(FFLAG90) -c GEFS_CplComp_ESMFMod_STUB.f

Ensemble_sub_STUB.o:	Ensemble_sub_STUB.f
	$(F77) $(FFLAG90) -c Ensemble_sub_STUB.f

kinds_STUB.o: GEFS_Cpl_Cal_Sto_Coef.fd/kinds_STUB.f90
	$(F90) $(FFLAG90) -c GEFS_Cpl_Cal_Sto_Coef.fd/kinds_STUB.f90

peuc_STUB.o: GEFS_Cpl_Cal_Sto_Coef.fd/peuc_STUB.f90
	$(F90) $(FFLAG90) -c GEFS_Cpl_Cal_Sto_Coef.fd/peuc_STUB.f90

pran_STUB.o: GEFS_Cpl_Cal_Sto_Coef.fd/pran_STUB.f90
	$(F90) $(FFLAG90) -c GEFS_Cpl_Cal_Sto_Coef.fd/pran_STUB.f90

prana_STUB.o: GEFS_Cpl_Cal_Sto_Coef.fd/prana_STUB.f90
	$(F90) $(FFLAG90) -c GEFS_Cpl_Cal_Sto_Coef.fd/prana_STUB.f90

Cal_Sto_Coef_STUB.o: GEFS_Cpl_Cal_Sto_Coef.fd/Cal_Sto_Coef_STUB.f90
	$(F90) $(FFLAG90) -c GEFS_Cpl_Cal_Sto_Coef.fd/Cal_Sto_Coef_STUB.f90
