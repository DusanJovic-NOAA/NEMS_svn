#######################
####  Model Core  #####
#######################

core: nmm                   # Introduce ourselves to the NEMS

#################################
#####  Grid Specifications  #####
#################################

im:  257                    # I gridpoints
jm:  181                    # J gridpoints
lm:  35                     # Number of atmospheric layers

tph0d:   0.0                # Central geographic latitude of grid (degrees)
tlm0d:   0.0                # Central geographic longitude of grid (degrees, positive east)

wbd:  -180.0                # Grid's western boundary (rotated degrees)
sbd:  -90.0                 # Grid's southern boundary (rotated degrees)


################################
#####  Grid Decomposition  #####
################################

inpes:  _INPES_             # Number of compute tasks in the I direction
jnpes:  05                  # Number of compute tasks in the J direction


#################################
####  Specify the I/O tasks  ####
#################################
                                                                                                                                              
quilting:              true    # Do you want asynchronous quilting/history writes?
read_groups:           0
read_tasks_per_group:  0
write_groups:          1
write_tasks_per_group: _WTPG_


############################################
#####  Fundamental Timestep (seconds)  #####
############################################

dt_int: 180                 # Integer seconds
dt_num: 0                   # Numerator of fractional second
dt_den: 1                   # Denominator of fractional second


#################################
#####  Forecast Start Time  #####
#################################
                                                                                                                                              
start_year:   2009
start_month:  07
start_day:    24
start_hour:   00
start_minute: 0
start_second: 0
                                                                                                                                              
tstart:       0.            # The starting forecast hour


#############################################################
#####  Forecast Length / Restarting / Output Frequency  #####
#############################################################
                                                              
nhours_fcst:      _FCSTL_   # Length of the forecast (hours)
minutes_history:  180       # Frequency of history output (minutes)
nhours_dfini:       0

restart:          _RSTRT_   # True--> A restarted run
minutes_restart:  720       # Frequency of restart output (minutes)

rst_out_00:          false  # True--> Write 00h history in restarted run
write_last_restart:  true   # True--> Write last restart file
freerun:             true   # True--> Original
                            # False--> 5X divergence dumping in NDAS forec.


###########################
#####  General Modes  #####
###########################

global:    true             # True--> Global ; False--> Regional
hydro:     false            # True--> Hydrostatic ;  False--> Nonhydrostatic
adiabatic: false            # True--> Adiabatic ;  False--> Diabatic


######################
#####  Dynamics  #####
######################
 
secadv:  true               # True--> 2nd order advection ; False--> 4th order advection
                                                  
smag2:   0.2                # Smagorinsky constant for 2nd order diffusion
                                        
codamp:  9.0                # Divergence damping constant
wcor:    0.2                # Divergence correction factor
 
idtad:   2                  # Number of adjustment timesteps between passive advection calls

advect_tracers:  true       # Will tracers be advected?
idtadt:  2                  # Number of adjustment timesteps between tracer advection calls (normally 1)

num_tracers_met:   4        # Number of specified meterological "tracer" scalars (e.g., water)
num_tracers_chem:  0        # Number of specified chem/aerosol "tracer" scalars

lnsh:  1                    # Number of boundary blending rows for H points
lnsv:  1                    # Number of boundary blending rows for V points


######################################
#####  Digital Filtering Options  ####
######################################

filter_method: 0            # 0--->none ; 1--->DFL ; 2---> DDFI ; 3--->TDFI

nsecs_dfl: 1800             # HALF foward filter window (s)          (DFL)
nsecs_bckddfi: 1800         # HALF backward integration duration (s) (DDFI)
nsecs_fwdddfi: 3600         # HALF foward filter window (s)          (DDFI)
nsecs_bcktdfi: 3600         # HALF backward filter window (s)        (TDFI)
nsecs_fwdtdfi: 3600         # HALF forward filter window (s)         (TDFI)


#############################
#####  Global Summations ####
#############################

use_allreduce:  false       # False--> use mpi send/recv for global sums
                            # True--> use mpi_allreduce for global sums

read_global_sums:  false    # Read in global summations or not
write_global_sums: false    # Write out global summations or not


#####################################
###  Precipitation Assimilation  ####
#####################################

pcpflg:  _PCPFLG_             # True--> assimilation on ; False--> assimilation off
pcphr: 6
write_prec_adj: _WPREC_       # True--> create baseline prec. files ; False--> regular run


############################
###  Gravity Wave Drag  ####
############################

gwdflg:  true               # True--> GWD on ; False--> GWD off


####################################
#####  Physics Scheme Options  #####
####################################

#---------------------------------
shortwave: gfdl             # Radiation schemes
longwave:  gfdl        
                                # gfdl--> GFDL (shortwave and longwave)
                                # gsfc--> Goddard shortwave
                                # dudh--> Dudhia shortwave
                                # rrtm--> RRTM (shortwave and longwave)

co2tf:  1                       # co2tf--> Read (0) or generate internally (1)
                                #          the GFDL CO2 transmission functions

#---------------------------------
convection:  bmj            # Convection scheme
                                # bmj    --> Betts-Miller-Janjic
                                # bmj_dev--> BMJ (development)
                                #  kf    --> Kain-Fritsch
                                # sas    --> Simplified Arakawa-Schubert
                                #  gd    --> Grell-Devenyi
                                # none   --> No convection

#---------------------------------
microphysics:  fer          # Microphysics scheme
                                # fer--> Ferrier
                                # kes--> Kessler
                                # lin--> Lin
                                # tho--> Thompson
                                # wsm3--> WSM3
                                # gfs--> GFS microphy
spec_adv:  .false.          # Individual cloud species advected
                                                                                                                                              
#---------------------------------
turbulence:  myj            # Turbulence schemes
                                # myj--> Mellor-Yamada-Janjic
                                # gfs--> GFS PBL                                                                                                                
#---------------------------------
                                                                                                                                              
sfc_layer:  myj             # Surface layer schemes
                                # myj--> Mellor-Yamada-Jamnjic
                                # mm5--> MM5 sfc layer
                                                                                                                                              
#---------------------------------
                                                                                                                                              
land_surface:  noah         # Land surface schemes
                                # noah--> NOAH scheme

ucmcall: 0                  # Use (1) or do not use (0) the Urban Canopy Model

#---------------------------------
                                                                                                                                              
gfs:  _gfsP_                # Select entire GFS physics suite


########################################
#####  Shallow Convection Switches  ####
########################################

fres:     1.00               # resolution factor for dsp's (default)
fr:       1.00               # land factor for dsp's (dafault)
fsl:      0.85               # reduction factor for "slow" dsp's over land (dafault)
fss:      0.85               # reduction factor for "slow" dsp's over water (dafault)

#fres:     0.80               # resolution factor for dsp's
#fr:       1.00               # land factor for dsp's
#fsl:      0.85               # reduction factor for "slow" dsp's over land
#fss:      0.85               # reduction factor for "slow" dsp's over water

entrain:    .false.         # Entrainment
newall:     .true.          # New cloud used at all shallow points
newswap:    .true.          # New clouds at swap shallow points
newupup:    .true.          # New cloud used for both heat and moisture up shallow pts.
nodeep:     .false.         # All deep convection diverted to shallow swap algorythm


###############################
#####  Physics Timesteps  #####
###############################

nrads:     40               # Number of dynamics timesteps between calls to shortwave
nradl:     40               # Number of dynamics timesteps  between calls to longwave

nphs:       2               # Number of dynamics timesteps between calls to landsurface and turbulence

nprecip:    2               # Number of dynamics timesteps between calls to convection and microphysics

####
#### NOTE:  User must set nhrs_udef to .TRUE. and set the emptying frequencies (nhrs_*) to the desired values
####        or else all accumulations will automatically be emptied hourly.
####

nhrs_udef:  true            # User defined when fluxes are emptied.
                            # False--> Auto ; True--> User defined:
nhrs_prec:  3               # Frequency in hours between times when precip arrays are emptied
nhrs_heat:  3               # Frequency in hours between times when heating arrays are emptied
nhrs_clod:  3               # Frequency in hours between times when cloud arrays are emptied
nhrs_rdlw:  3               # Frequency in hours between times when LW radiation arrays are emptied
nhrs_rdsw:  3               # Frequency in hours between times when SW radiation arrays are emptied
nhrs_srfc:  3               # Frequency in hours between times when sfc evap/flux arrays are emptied


################################################
####  Write History/Restart Specifications  ####
################################################
 
nemsio_input: _NEMSI_

write_hst_flag:          .TRUE.      # True--> Yes write history files
write_rst_flag:          .TRUE.      # True--> Yes write restart files
write_nemsioflag:        .TRUE.      # True--> Yes write nemsio run history files
write_nemsioctl:         .TRUE.      # True--> Yes write ctl for nemsio run history files
write_donefileflag:      .FALSE.

io_hst_unit:             -999
io_rst_unit:             -999

#-------------------------------------------------
# If IO_FILE == 'DEFERRED', use hst/rst_name_base
# as the first part of the history/restart
# file names.
#-------------------------------------------------

io_hst_file:             'DEFERRED'
io_rst_file:             'DEFERRED'
hst_name_base:           'nmm_b_history'
rst_name_base:           'nmm_b_restart'

io_status:               'REPLACE'
io_access:               'SEQUENTIAL'
io_form:                 'UNFORMATTED'
io_recl:                 100
io_position:             ' '
io_action:               'WRITE'
io_delim:                ' '
io_pad:                  ' '


##################################
####  Nesting Specifications  ####
##################################

my_domain_id: 1              # The ID number of this domain (uppermost domain must have ID=1)
my_parent_id: -999           # The ID number of this domain's parent
n_children:  _NCHILD_        # How many child domains does this domain have?
i_parent_start:  175         # Nest southwest corner at this parent I
j_parent_start:  127         # Nest southwest corner at this parent J
parent_child_space_ratio: 3  # Ratio of parent grid increment to nests's

input_ready:  .FALSE.        # Nest has pre-generated input file


#######################
####  Timing Info  ####
#######################

nhours_clocktime:   1        # Frequency in hours between clocktime diagnostic prints.
npe_print:          1        # The MPI task that will provide the clocktimes.


##########################
####  Ensemble flags  ####
##########################

ENS_SPS:            .FALSE.
total_member:       1
RUN_CONTINUE:       .FALSE.
PE_MEMBER01:        0
